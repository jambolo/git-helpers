#!/usr/bin/env bash
#
# For all git repositories in any subdirectories, pulls all branches and tags from all remotes.

set -e  # Exit on error

# Find git repos and loop over them:
find . -type d -name ".git" | while read -r repo; do
    dir="${repo%/.git}"
    echo "Updating repository: $dir"

    git -C "$dir" fetch --all --tags --prune || echo "Fetch failed in $dir"
    git -C "$dir" pull --all || echo "Pull failed in $dir"
    echo
done